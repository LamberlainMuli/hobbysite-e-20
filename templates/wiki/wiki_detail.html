{% extends 'base.html' %}
{% load static %}
{% block header %}{% endblock %}
{% block title %}{{ object.name }}{% endblock %}
{% block content %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wiki Canos</title>
</head>

<body>
    <h2></h2>
    <h3>
        <div class="c" style="font-size: 18px; padding-left: 4% ;padding-right: 10%;">

            <ul>
                <p style="margin-right:5%; padding: 15px; margin-bottom: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); border-radius: 8px;">{{ article.title }}</p>

                <div style="text-align: center; background-color: #ffe5b4; padding: 20px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                    <img src="{{article.image.url}}" style="max-width: 100%; max-height: 200px; border-radius: 10px;" alt="{{article.image_description}}">
                </div>
                <p style="text-align: center; "><b>Created by: </b>{{article.author}}</p>
                <li><b>Updated last: </b>{{ article.updated_on }}</li>
                <li><b>Created last: </b>{{ article.created_on }}</li>
                <li style="text-align: justify;"><b>Description: </b>{{ article.entry }}</li>
               

                <br>
            </ul>

        </div>
    </h3>
    <h3>More Articles under {{ article.category.name }}</h3>
    <ul>
        {% for category_article in category_articles %}
    <li><a href="{{ category_article.get_absolute_url }}">{{ category_article.title }}</a></li>
    {% endfor %}
    </ul>
    <br>

    {% if request.user.is_authenticated %}

    <h2>Add Comment</h2>
    <form method="post">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit">Submit</button>
    </form>
    {% endif %}

    <h2>Existing Comments</h2>
    <ul>
        {% for comment in comments %}
            <li style="background-color: #ffffff; padding: 20px; margin-bottom: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); border-radius: 8px;">

            <b>{{ comment.author }}</b> - {{ comment.created_on }}
            <p>{{ comment.entry }}</p>
        </li>
        {% endfor %}
    </ul>

    <a href="/wiki/articles">
        <button style="margin-left: 10% ;">
            Go Back to Wiki List
        </button>
    </a>
    <!-- <p>HI</p>
    <p> the reqeust user id is: {{request.user.id}}</p>
    <p> the article author id is: {{article.author.pk}}</p> -->

    {% if request.user.is_authenticated %}
    {% if request.user.id == article.author.pk %}
    <a href="{% url 'wiki:wiki_update' pk=article.pk  %}">
        <button style="margin-left: 7% ;">
            Edit this Wiki
        </button>
    </a>
    {% else %}
    {% endif %}
    {% endif %}

    <br>
    <br>
    <br>
    <br>
</body>

</html>

{% endblock content %}

<style>
</style>

<!----!-  <a href="/wiki/article/{{article.pk}}/edit"> 
        <button style="margin-left: 7% ;">
        Edit this Wiki
        </button>
    </a>---->


